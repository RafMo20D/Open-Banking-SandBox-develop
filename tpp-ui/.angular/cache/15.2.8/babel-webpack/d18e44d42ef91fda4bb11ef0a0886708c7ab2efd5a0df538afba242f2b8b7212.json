{"ast":null,"code":"import { UntypedFormBuilder, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuthService } from '../../../services/auth.service';\nimport { CustomizeService } from '../../../services/customize.service';\nimport { ADMIN_KEY, ERROR_MESSAGE } from 'src/app/commons/constant/constant';\nimport browser from 'browser-detect';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { InfoService } from '../../../commons/info/info.service';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ErrorDialogComponent } from '../../../commons/dialog/error-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/auth.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../../services/customize.service\";\nimport * as i5 from \"@angular/material/snack-bar\";\nimport * as i6 from \"../../../commons/info/info.service\";\nimport * as i7 from \"@angular/material/dialog\";\nimport * as i8 from \"@angular/common\";\nfunction LoginComponent_p_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Welcome to \");\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵtext(3, \"adorsys TPP UI\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.errorMessage, \" \");\n  }\n}\nfunction LoginComponent_label_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 27);\n    i0.ɵɵtext(1, \"Username\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1, \" Login is Required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_label_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"label\", 29);\n    i0.ɵɵtext(1, \"Password\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1, \"Pin is Required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 30)(1, \"a\", 31);\n    i0.ɵɵtext(2, \"Create new account\");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\nexport let LoginComponent = /*#__PURE__*/(() => {\n  class LoginComponent {\n    constructor(authService, formBuilder, route, router, customizeService, _snackBar, infoService, dialog) {\n      this.authService = authService;\n      this.formBuilder = formBuilder;\n      this.route = route;\n      this.router = router;\n      this.customizeService = customizeService;\n      this._snackBar = _snackBar;\n      this.infoService = infoService;\n      this.dialog = dialog;\n      this.horizontalPosition = 'right';\n      this.verticalPosition = 'top';\n      this.durationInSeconds = 4;\n    }\n    ngOnInit() {\n      const result = browser();\n      if (result.name !== 'chrome' && result.name !== 'edge' && result.name !== 'safari' && result.name !== 'firefox') {\n        this._snackBar.open(`Unfortunately, you are using an outdated browser. Our website may not look quite right in it. Please consider updating your browser to enjoy an optimal experience.`, 'Close', {\n          horizontalPosition: this.horizontalPosition,\n          verticalPosition: this.verticalPosition,\n          duration: this.durationInSeconds * 1000\n        });\n      }\n      this.loginForm = this.formBuilder.group({\n        login: ['', Validators.required],\n        pin: ['', Validators.required]\n      });\n      this.showErrorMessageIfLoggedOutByTimeout();\n    }\n    onSubmit() {\n      if (this.loginForm.invalid) {\n        this.errorMessage = 'Please enter your credentials';\n        return;\n      }\n      this.authService.login(this.loginForm.value).subscribe(success => {\n        if (success) {\n          this.navigateOnLogin();\n        }\n      }, data => {\n        if (data.status === 401) {\n          this.dialog.open(ErrorDialogComponent, {\n            height: '200px',\n            width: '350px',\n            data: {\n              heading: 'Wrong credentials',\n              description: 'You have entered wrong credentials.'\n            }\n          });\n        }\n        if (data.status === 403) {\n          this.dialog.open(ErrorDialogComponent, {\n            height: '200px',\n            width: '350px',\n            data: {\n              heading: 'Wrong roles',\n              description: 'You have the wrong role.'\n            }\n          });\n        }\n      });\n      this.showErrorMessageIfLoggedOutByTimeout();\n    }\n    showErrorMessageIfLoggedOutByTimeout() {\n      const message = sessionStorage.getItem(ERROR_MESSAGE);\n      if (message != null && message != 'null') {\n        this.infoService.openFeedback(sessionStorage.getItem(ERROR_MESSAGE), {\n          severity: 'error'\n        });\n        sessionStorage.setItem(ERROR_MESSAGE, null);\n      }\n    }\n    navigateOnLogin() {\n      if (sessionStorage.getItem(ADMIN_KEY) === 'true') {\n        this.authService.logout();\n        this.infoService.openFeedback('Admin doe not have access to this system', {\n          severity: 'error'\n        });\n      } else {\n        this.router.navigate(['/']);\n      }\n    }\n    static #_ = this.ɵfac = function LoginComponent_Factory(t) {\n      return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.UntypedFormBuilder), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.CustomizeService), i0.ɵɵdirectiveInject(i5.MatSnackBar), i0.ɵɵdirectiveInject(i6.InfoService), i0.ɵɵdirectiveInject(i7.MatDialog));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginComponent,\n      selectors: [[\"app-login\"]],\n      decls: 38,\n      vars: 16,\n      consts: [[1, \"d-flex\", \"vh-100\"], [1, \"col-2\"], [1, \"col-3\", \"bg-white\", \"pt-5\"], [3, \"formGroup\", \"ngSubmit\"], [\"href\", \"#\", 1, \"navbar-brand\"], [1, \"logo\", 3, \"src\"], [1, \"card-title\", \"font-weight-bold\"], [4, \"ngIf\"], [1, \"card-text\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"mrb-3\", \"mrt\"], [1, \"mb-3\"], [\"class\", \"p-2\", \"for\", \"login\", 4, \"ngIf\"], [\"autocomplete\", \"off\", \"formControlName\", \"login\", \"id\", \"login\", \"placeholder\", \"Enter your login\", \"type\", \"text\", 1, \"form-control\", 3, \"ngClass\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"class\", \"p-2\", \"for\", \"pin\", 4, \"ngIf\"], [\"autocomplete\", \"new-password\", \"formControlName\", \"pin\", \"id\", \"pin\", \"placeholder\", \"Enter your pin\", \"type\", \"password\", 1, \"form-control\", 3, \"ngClass\"], [\"routerLink\", \"/reset-password\", 1, \"link-color\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"btn-block\", \"mb-3\", 3, \"disabled\"], [\"class\", \"text-center text-light-green\", 4, \"ngIf\"], [1, \"align-self-end\", \"text-center\", \"text-light-grey\"], [1, \"col-1\"], [1, \"col\", \"bg-light\", \"d-flex\", \"flex-column\"], [\"src\", \"../../../../assets/UI/dots-left.svg\", 1, \"image-fluid\", \"w-50\", \"h-25\", \"align-self-start\", \"flip-vertical\"], [\"src\", \"../../../../assets/UI/modelbank-illustration.svg\", 1, \"image-fluid\", \"h-50\", \"w-50\", \"align-self-center\"], [\"src\", \"../../../../assets/UI/dots-right.svg\", 1, \"image-fluid\", \"h-25\", \"w-50\", \"align-self-end\"], [1, \"alert\", \"alert-danger\"], [\"for\", \"login\", 1, \"p-2\"], [1, \"invalid-feedback\"], [\"for\", \"pin\", 1, \"p-2\"], [1, \"text-center\", \"text-light-green\"], [\"routerLink\", \"/register\"]],\n      template: function LoginComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵelement(1, \"div\", 1);\n          i0.ɵɵelementStart(2, \"div\", 2)(3, \"form\", 3);\n          i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_3_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(4, \"a\", 4);\n          i0.ɵɵelement(5, \"img\", 5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(6, \"br\");\n          i0.ɵɵelementStart(7, \"h2\", 6);\n          i0.ɵɵtemplate(8, LoginComponent_p_8_Template, 4, 0, \"p\", 7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"p\", 8);\n          i0.ɵɵtext(10, \"Please log in with your bank account user name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(11, LoginComponent_div_11_Template, 2, 1, \"div\", 9);\n          i0.ɵɵelementStart(12, \"div\", 10)(13, \"div\", 11);\n          i0.ɵɵtemplate(14, LoginComponent_label_14_Template, 2, 0, \"label\", 12);\n          i0.ɵɵelement(15, \"input\", 13);\n          i0.ɵɵtemplate(16, LoginComponent_div_16_Template, 2, 0, \"div\", 14);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"div\", 11);\n          i0.ɵɵtemplate(18, LoginComponent_label_18_Template, 2, 0, \"label\", 15);\n          i0.ɵɵelement(19, \"input\", 16);\n          i0.ɵɵtemplate(20, LoginComponent_div_20_Template, 2, 0, \"div\", 14);\n          i0.ɵɵelementStart(21, \"div\")(22, \"a\", 17)(23, \"small\");\n          i0.ɵɵtext(24, \"Forgot PIN?\");\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵelementStart(25, \"button\", 18);\n          i0.ɵɵtext(26, \"Login\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(27, LoginComponent_div_27_Template, 3, 0, \"div\", 19);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(28, \"div\", 20)(29, \"p\");\n          i0.ɵɵtext(30, \" powered by \");\n          i0.ɵɵelement(31, \"br\");\n          i0.ɵɵtext(32, \" adorsys \");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelement(33, \"div\", 21);\n          i0.ɵɵelementStart(34, \"div\", 22);\n          i0.ɵɵelement(35, \"img\", 23)(36, \"img\", 24)(37, \"img\", 25);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          let tmp_5_0;\n          let tmp_6_0;\n          let tmp_8_0;\n          let tmp_9_0;\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formGroup\", ctx.loginForm);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"src\", ctx.customizeService.getLogo(), i0.ɵɵsanitizeUrl);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", !ctx.customizeService.isCustom());\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", !ctx.customizeService.isCustom());\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(12, _c0, ((tmp_5_0 = ctx.loginForm.get(\"login\")) == null ? null : tmp_5_0.errors) && ((tmp_5_0 = ctx.loginForm.get(\"login\")) == null ? null : tmp_5_0.dirty)));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_6_0 = ctx.loginForm.get(\"login\")) == null ? null : tmp_6_0.errors == null ? null : tmp_6_0.errors.required) && ((tmp_6_0 = ctx.loginForm.get(\"login\")) == null ? null : tmp_6_0.dirty));\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", !ctx.customizeService.isCustom());\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(14, _c0, ((tmp_8_0 = ctx.loginForm.get(\"pin\")) == null ? null : tmp_8_0.errors) && ((tmp_8_0 = ctx.loginForm.get(\"pin\")) == null ? null : tmp_8_0.dirty)));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", ((tmp_9_0 = ctx.loginForm.get(\"pin\")) == null ? null : tmp_9_0.errors == null ? null : tmp_9_0.errors.required) && ((tmp_9_0 = ctx.loginForm.get(\"pin\")) == null ? null : tmp_9_0.dirty));\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"disabled\", ctx.loginForm.invalid);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.customizeService.showRegister());\n        }\n      },\n      dependencies: [i8.NgClass, i8.NgIf, i3.RouterLink, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName],\n      styles: [\"[_ngcontent-%COMP%]:root{--fontFamily: \\\"Verdana\\\", sans-serif;--textFontSize: 1rem;--textFontWeight: bold;--textFontSize768px: 1rem;--textFontWeight768px: bold;--textFontSize1024px: 1rem;--textFontWeight1024px: bold;--h1FontSize: 2rem;--h1FontWeight: bold;--h2FontSize: 1.8rem;--h2FontWeight: 700;--h3FontSize: 1rem;--h3FontWeight: normal;--h1FontSize768px: 2rem;--h1FontWeight768px: bold;--h1FontSize1024px: 2rem;--h1FontWeight1024px: bold;--h2FontSize768px: 1.5rem;--h2FontWeight768px: bold;--h2FontSize1024px: 1.5rem;--h2FontWeight1024px: bold;--h3FontSize768px: 1rem;--h3FontWeight768px: normal;--h3FontSize1024px: 1rem;--h3FontWeight1024px: normal;--colorPrimary: #13bf9f;--colorSecondary: #13bf9f;--tr-color: #000000;--bodyBG: #fff;--bodyFontColor: #212529;--mainBG: #f8f8f8;--menuItemHovered: white;--headerBG: #ffffff;--headerFontColor: #000000;--headerBorderTop: 0px;--footerBG: #054f72;--footerFontColor: #ffffff;--anchorFontColor: #2c2e2f;--anchorFontColorHover: #13bf9f;--button-heigh: 50px;--buttonTextColor: #fff;--buttonBorderRadius: 3px;--buttonColorTextDisabled: #fff;--buttonBGDisabled: linear-gradient(129.54deg, var(--buttonBgGradient1) 0%, var(--buttonBgGradient2) 100%);--button-opacity: .65;--button-heigh: 56px;--btn-padding: 15px 12px;--buttonBgGradient1: #13b4bf;--buttonBgGradient2: #0a8f70;--buttonBG: linear-gradient(129.54deg, var(--buttonBgGradient1) 0%, var(--buttonBgGradient2) 100%);--buttonHoveredGradient1: #059c85;--buttonHoveredGradient2: #0a8f70;--buttonHovered: linear-gradient(129.54deg, var(--buttonHoveredGradient1) 0%, var(--buttonHoveredGradient2) 100%);--buttonClickedGradient1: #13b4bf;--buttonClickedGradient2: #008073;--buttonClicked: linear-gradient(129.54deg, var(--buttonClickedGradient1) 0%, var(--buttonClickedGradient2) 100%);--secondaryButtonTextColor: #dc3545;--secondaryButtonBG: white;--secondaryButtonHoveredTextColor: white;--secondaryButtonHovered: #dc3545;--secondaryButtonClickedTextColor: white;--secondaryButtonClicked: #dc3545;--secondaryButtonBorderStyle: 1px solid #dc3545;--inputBG: white;--inputBorderStyleLeft: 1px solid #a0a0a0;--inputBorderStyleRight: 1px solid #a0a0a0;--inputBorderStyleBottom: 1px solid #a0a0a0;--inputBorderStyleTop: 1px solid #a0a0a0;--inputBorderRadius: .25rem;--selectBG: white;--selectColor: #3b4151;--selectBorderStyleLeft: none;--selectBorderStyleRight: none;--selectBorderStyleBottom: none;--selectBorderStyleTop: none;--selectBorderRadius: none;--margin-form-group: 0 0 4rem 0;--form-group-height: 3.5rem;--border-bottom: none;--margin-top-icon: 6px;--arrow-url: url(/assets/icons/arrow-down.svg)}form[_ngcontent-%COMP%]{font-weight:100}.container-fluid[_ngcontent-%COMP%]{padding:0}.sticky-top[_ngcontent-%COMP%]{z-index:1000}.card[_ngcontent-%COMP%]{border:none}.card-title[_ngcontent-%COMP%]{font-size:2rem}.card__headline[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.card__subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:#a0a0a0}.card[_ngcontent-%COMP%]   .card__subtitle[_ngcontent-%COMP%]{margin-bottom:1.5rem}.text-light-grey[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#a0a0a0}.text-light-green[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#059c85}.text-light-grey[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#a0a0a0}.btn[_ngcontent-%COMP%]{width:100%}.btn[_ngcontent-%COMP%]:disabled{opacity:1;background:var(--buttonBGDisabled);color:var(--buttonColorTextDisabled)}.flip-vertical[_ngcontent-%COMP%]{transform:scaleY(-1)}\"]\n    });\n  }\n  return LoginComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}