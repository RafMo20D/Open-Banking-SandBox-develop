{"ast":null,"code":"import { PageNavigationService } from '../../../services/page-navigation.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { map } from 'rxjs/operators';\nimport { PiisConsentService } from '../../../services/piis-consent.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/page-navigation.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../../services/piis-consent.service\";\nimport * as i4 from \"@angular/common\";\nconst _c0 = function (a0) {\n  return [a0];\n};\nexport let UserFundsConfirmationDetailsComponent = /*#__PURE__*/(() => {\n  class UserFundsConfirmationDetailsComponent {\n    constructor(pageNavigationService, router, activatedRoute, piisConsentService) {\n      this.pageNavigationService = pageNavigationService;\n      this.router = router;\n      this.activatedRoute = activatedRoute;\n      this.piisConsentService = piisConsentService;\n    }\n    ngOnInit() {\n      this.activatedRoute.params.pipe(map(response => {\n        this.userLogin = response.userLogin;\n        return response.id;\n      })).subscribe(id => {\n        /* Load consent from list, maybe userid is needed?*/\n        this.piisConsentService.getPiisConsent(id, this.userLogin).subscribe(piisConsent => {\n          this.piisConsent = piisConsent;\n          this.piisConsent.consentId = id;\n        });\n      });\n    }\n    terminate() {\n      /* PIIS consent status should be changed to terminatedByAspsp */\n      /* Testing purpose */\n      console.log(this.piisConsent);\n      this.piisConsentService.putPiiSConsent(this.piisConsent).subscribe(res => {\n        console.log(res);\n      });\n      this.router.navigate([this.pageNavigationService.getLastVisitedPage()]);\n    }\n    static #_ = this.ɵfac = function UserFundsConfirmationDetailsComponent_Factory(t) {\n      return new (t || UserFundsConfirmationDetailsComponent)(i0.ɵɵdirectiveInject(i1.PageNavigationService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.PiisConsentService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UserFundsConfirmationDetailsComponent,\n      selectors: [[\"app-user-funds-confirmation-details\"]],\n      decls: 31,\n      vars: 11,\n      consts: [[1, \"container-fluid\"], [1, \"card\"], [1, \"card-body--large\", \"mb-4\"], [\"queryParamsHandling\", \"preserve\", 1, \"btn\", \"btn-sm\", \"btn-outline-secondary\", \"mb-4\", 3, \"routerLink\"], [1, \"header__title\", \"mb-4\"], [1, \"row\"], [1, \"col-12\", \"col-md-3\"], [1, \"col-12\", \"col-md-9\", \"text-muted\"], [1, \"mb-3\", \"d-flex\", \"flex-row\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-danger\", 3, \"click\"]],\n      template: function UserFundsConfirmationDetailsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"button\", 3);\n          i0.ɵɵtext(4, \" < Back \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"div\", 4);\n          i0.ɵɵtext(6, \"Funds confirmation consent details\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"div\", 5)(8, \"div\", 6);\n          i0.ɵɵtext(9, \"Consent ID\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"div\", 7);\n          i0.ɵɵtext(11);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"div\", 5)(13, \"div\", 6);\n          i0.ɵɵtext(14, \"Account Access\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"div\", 7);\n          i0.ɵɵtext(16);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(17, \"div\", 5)(18, \"div\", 6);\n          i0.ɵɵtext(19, \"TPP Authorisation Number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"div\", 7);\n          i0.ɵɵtext(21);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(22, \"div\", 5)(23, \"div\", 6);\n          i0.ɵɵtext(24, \"Valid until\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"div\", 7);\n          i0.ɵɵtext(26);\n          i0.ɵɵpipe(27, \"date\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(28, \"div\", 8)(29, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function UserFundsConfirmationDetailsComponent_Template_button_click_29_listener() {\n            return ctx.terminate();\n          });\n          i0.ɵɵtext(30, \"Terminate\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(9, _c0, ctx.pageNavigationService.getLastVisitedPage()));\n          i0.ɵɵadvance(8);\n          i0.ɵɵtextInterpolate1(\" \", ctx.piisConsent == null ? null : ctx.piisConsent.consentId, \" \");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate2(\" \", ctx.piisConsent == null ? null : ctx.piisConsent.access == null ? null : ctx.piisConsent.access.iban, \" \", ctx.piisConsent == null ? null : ctx.piisConsent.access == null ? null : ctx.piisConsent.access.currency, \" \");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\" \", ctx.piisConsent == null ? null : ctx.piisConsent.tppAuthorisationNumber, \" \");\n          i0.ɵɵadvance(5);\n          i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(27, 6, ctx.piisConsent == null ? null : ctx.piisConsent.validUntil, \"dd.MM.yyyy\"), \" \");\n        }\n      },\n      dependencies: [i2.RouterLink, i4.DatePipe],\n      styles: [\".row[_ngcontent-%COMP%]{margin-bottom:2rem}.card[_ngcontent-%COMP%]{max-width:650px}\"]\n    });\n  }\n  return UserFundsConfirmationDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}