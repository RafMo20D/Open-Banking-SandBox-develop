{"ast":null,"code":"import { UntypedFormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { InfoService } from '../../../commons/info/info.service';\nimport { CustomizeService } from '../../../services/customize.service';\nimport { SettingsService } from '../../../services/settings.service';\nimport { TppManagementService } from '../../../services/tpp-management.service';\nimport { PageNavigationService } from '../../../services/page-navigation.service';\nimport { Location } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../commons/info/info.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../../services/settings.service\";\nimport * as i5 from \"../../../services/customize.service\";\nimport * as i6 from \"../../../services/page-navigation.service\";\nimport * as i7 from \"../../../services/tpp-management.service\";\nimport * as i8 from \"@angular/common\";\nfunction AdminCreateComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \" Email is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminCreateComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \" Email is invalid \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminCreateComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \" Login is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminCreateComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \" PIN is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AdminCreateComponent_div_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1, \" PIN must contain at least 5 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\nexport let AdminCreateComponent = /*#__PURE__*/(() => {\n  class AdminCreateComponent {\n    constructor(infoService, router, formBuilder, settingsService, customizeService, pageNavigationService, tppManagementService, location) {\n      this.infoService = infoService;\n      this.router = router;\n      this.formBuilder = formBuilder;\n      this.settingsService = settingsService;\n      this.customizeService = customizeService;\n      this.pageNavigationService = pageNavigationService;\n      this.tppManagementService = tppManagementService;\n      this.location = location;\n    }\n    ngOnInit() {\n      this.initializeRegisterForm();\n    }\n    get formControl() {\n      return this.userForm.controls;\n    }\n    onSubmit() {\n      if (this.userForm.invalid) {\n        this.submitted = true;\n        return;\n      }\n      let message;\n      const navigateUrl = '/admin/all';\n      this.tppManagementService.createAdmin(this.userForm.value).subscribe(() => {\n        message = `New Admin has been successfully registered.`;\n        this.navigateAndGiveFeedback(navigateUrl, message);\n      });\n    }\n    navigateAndGiveFeedback(navigateUrl, message) {\n      this.router.navigate([navigateUrl]).then(() => {\n        this.infoService.openFeedback(message);\n      });\n    }\n    initializeRegisterForm() {\n      this.userForm = this.formBuilder.group({\n        login: ['', Validators.required],\n        email: ['', [Validators.required, Validators.pattern(new RegExp(/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/))]],\n        pin: ['', Validators.required]\n      });\n      this.userForm.enable();\n    }\n    static #_ = this.ɵfac = function AdminCreateComponent_Factory(t) {\n      return new (t || AdminCreateComponent)(i0.ɵɵdirectiveInject(i1.InfoService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.UntypedFormBuilder), i0.ɵɵdirectiveInject(i4.SettingsService), i0.ɵɵdirectiveInject(i5.CustomizeService), i0.ɵɵdirectiveInject(i6.PageNavigationService), i0.ɵɵdirectiveInject(i7.TppManagementService), i0.ɵɵdirectiveInject(i8.Location));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AdminCreateComponent,\n      selectors: [[\"app-create-admin\"]],\n      decls: 28,\n      vars: 16,\n      consts: [[1, \"container-fluid\"], [1, \"header__title\", \"mb-4\"], [1, \"card\", \"card--medium\"], [\"novalidate\", \"\", \"autocomplete\", \"off\", 3, \"formGroup\", \"ngSubmit\"], [1, \"card-body\"], [1, \"mb-4\"], [\"for\", \"email\"], [\"aria-describedby\", \"emailHelp\", \"autocomplete\", \"off\", \"formControlName\", \"email\", \"id\", \"email\", \"placeholder\", \"Enter email\", \"type\", \"email\", 1, \"form-control\", 3, \"ngClass\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"for\", \"login\", 1, \"control-label\"], [\"aria-describedby\", \"emailHelp\", \"autocomplete\", \"off\", \"formControlName\", \"login\", \"id\", \"login\", \"placeholder\", \"Enter your login\", \"type\", \"text\", 1, \"form-control\", 3, \"ngClass\"], [\"for\", \"pin\", 1, \"control-label\"], [\"aria-describedby\", \"pinHelp\", \"autocomplete\", \"new-password\", \"formControlName\", \"pin\", \"id\", \"pin\", \"placeholder\", \"Enter PIN\", \"type\", \"password\", 1, \"form-control\", 3, \"ngClass\"], [1, \"d-flex\", \"justify-content-between\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-danger\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"invalid-feedback\"]],\n      template: function AdminCreateComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n          i0.ɵɵtext(2, \"Create new administrator\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 2)(4, \"form\", 3);\n          i0.ɵɵlistener(\"ngSubmit\", function AdminCreateComponent_Template_form_ngSubmit_4_listener() {\n            return ctx.onSubmit();\n          });\n          i0.ɵɵelementStart(5, \"div\", 4)(6, \"div\", 5)(7, \"label\", 6);\n          i0.ɵɵtext(8, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(9, \"input\", 7);\n          i0.ɵɵtemplate(10, AdminCreateComponent_div_10_Template, 2, 0, \"div\", 8);\n          i0.ɵɵtemplate(11, AdminCreateComponent_div_11_Template, 2, 0, \"div\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"div\", 5)(13, \"label\", 9);\n          i0.ɵɵtext(14, \"Login\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"input\", 10);\n          i0.ɵɵtemplate(16, AdminCreateComponent_div_16_Template, 2, 0, \"div\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"div\", 5)(18, \"label\", 11);\n          i0.ɵɵtext(19, \"PIN\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(20, \"input\", 12);\n          i0.ɵɵtemplate(21, AdminCreateComponent_div_21_Template, 2, 0, \"div\", 8);\n          i0.ɵɵtemplate(22, AdminCreateComponent_div_22_Template, 2, 0, \"div\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"div\", 13)(24, \"button\", 14);\n          i0.ɵɵlistener(\"click\", function AdminCreateComponent_Template_button_click_24_listener() {\n            return ctx.location.back();\n          });\n          i0.ɵɵtext(25, \"Cancel\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(26, \"button\", 15);\n          i0.ɵɵtext(27, \"Submit\");\n          i0.ɵɵelementEnd()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"formGroup\", ctx.userForm);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(10, _c0, (ctx.formControl[\"email\"].touched || ctx.submitted) && ctx.formControl[\"email\"].errors));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (ctx.formControl[\"email\"].touched || ctx.submitted) && ctx.formControl[\"email\"].hasError(\"required\"));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (ctx.formControl[\"email\"].touched || ctx.submitted) && ctx.formControl[\"email\"].hasError(\"email\"));\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(12, _c0, (ctx.formControl[\"login\"].touched || ctx.submitted) && ctx.formControl[\"login\"].errors));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (ctx.formControl[\"login\"].touched || ctx.submitted) && ctx.formControl[\"login\"].hasError(\"required\"));\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(14, _c0, (ctx.formControl[\"pin\"].touched || ctx.submitted) && ctx.formControl[\"pin\"].errors));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (ctx.formControl[\"pin\"].touched || ctx.submitted) && ctx.formControl[\"pin\"].hasError(\"required\"));\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", (ctx.formControl[\"pin\"].touched || ctx.submitted) && ctx.formControl[\"pin\"].hasError(\"minlength\"));\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"disabled\", ctx.userForm.invalid);\n        }\n      },\n      dependencies: [i8.NgClass, i8.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.FormControlName],\n      styles: [\".card-body[_ngcontent-%COMP%]{padding:2rem}.icon[_ngcontent-%COMP%]{width:25px;height:25px;padding-left:3px}\"]\n    });\n  }\n  return AdminCreateComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}